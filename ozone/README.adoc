

https://cwiki.apache.org/confluence/display/HADOOP/How+To+Contribute+to+Ozone


https://github.com/apache/hadoop-ozone/tree/master/hadoop-ozone/dist/src/main/k8s/examples/getting-started


https://github.com/marcredhat/crcdemos/blob/master/yunikorn/baremetal_README.adoc




----
Tested on Red Hat Enterprise Linux release 8.4 Beta (Ootpa)
----

----
git clone https://github.com/apache/hadoop-ozone.git
cd hadoop-ozone/hadoop-ozone

mv pom.xml pom.xml.orig
wget https://raw.githubusercontent.com/marcredhat/crcdemos/master/ozone/pom.xml

mvn clean install package -DskipShade -DskipRecon -DskipTests -Pdist -Dtar
----

----
Expected result:
[INFO] Reactor Summary:
[INFO]
[INFO] Apache Hadoop HDDS ................................. SUCCESS [  2.454 s]
[INFO] Apache Hadoop HDDS Hadoop Client dependencies ...... SUCCESS [  1.923 s]
[INFO] Apache Hadoop HDDS Hadoop Test dependencies ........ SUCCESS [  3.432 s]
[INFO] Apache Hadoop HDDS Hadoop Server dependencies ...... SUCCESS [  2.954 s]
[INFO] Apache Hadoop HDDS Client Interface ................ SUCCESS [ 27.502 s]
[INFO] Apache Hadoop HDDS Admin Interface ................. SUCCESS [ 15.173 s]
[INFO] Apache Hadoop HDDS Server Interface ................ SUCCESS [ 19.835 s]
[INFO] Apache Hadoop HDDS Test Utils ...................... SUCCESS [  4.173 s]
[INFO] Apache Hadoop HDDS Config .......................... SUCCESS [  3.674 s]
[INFO] Apache Hadoop HDDS Common .......................... SUCCESS [ 13.256 s]
[INFO] Apache Hadoop HDDS Client .......................... SUCCESS [  8.462 s]
[INFO] Apache Hadoop HDDS Server Framework ................ SUCCESS [ 13.622 s]
[INFO] Apache Hadoop HDDS/Ozone Documentation ............. SUCCESS [  0.944 s]
[INFO] Apache Hadoop HDDS Container Service ............... SUCCESS [ 14.801 s]
[INFO] Apache Hadoop HDDS SCM Server ...................... SUCCESS [ 13.698 s]
[INFO] Apache Hadoop HDDS Tools ........................... SUCCESS [  6.900 s]
[INFO] Apache Hadoop Ozone 1.1.0-SNAPSHOT ................. SUCCESS [  1.135 s]
----

----
crc console --credentials
oc login -u kubeadmin -p <password>  https://api.crc.testing:6443
----


----
alias kubectl=oc
cd dist/src/main/k8s/examples/getting-started/

mv s3g-statefulset.yaml s3g-statefulset.yaml.orig
wget https://raw.githubusercontent.com/marcredhat/crcdemos/master/ozone/s3g-statefulset.yaml

kubectl apply -f .
----

----
Expected result:
configmap/config created
service/datanode-public created
service/datanode created
statefulset.apps/datanode created
service/om-public created
service/om created
statefulset.apps/om created
service/s3g-public created
service/s3g created
statefulset.apps/s3g created
service/scm-public created
service/scm created
statefulset.apps/scm created
----

----
oc get pods
NAME    READY   STATUS    RESTARTS   AGE
s3g-0   1/1     Running   0          7s
----

----
oc get svc
NAME              TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
datanode          ClusterIP   None             <none>        9870/TCP         13s
datanode-public   NodePort    172.25.187.102   <none>        9870:30026/TCP   13s
om                ClusterIP   None             <none>        9874/TCP         13s
om-public         NodePort    172.25.135.25    <none>        9874:32137/TCP   13s
s3g               ClusterIP   None             <none>        9878/TCP         13s
s3g-public        NodePort    172.25.187.111   <none>        9878:32231/TCP   13s
scm               ClusterIP   None             <none>        9876/TCP         13s
scm-public        NodePort    172.25.159.197   <none>        9876:30766/TCP   13s
----



----
sed -i 's/kubectl/oc/g' ../testlib.sh
----

----
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install
----
